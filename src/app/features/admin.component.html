<!-- Vista migrada desde AngularJS: admin.html -->
<div class="card fade-in" style="max-width: 900px">
  <!-- Header de la página -->
  <div
    style="
      text-align: center;
      margin-bottom: 2rem;
      padding-bottom: 2rem;
      border-bottom: 1px solid var(--gris-borde);
    "
  >
    <div
      style="
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 80px;
        height: 80px;
        background: var(--azul-produbanco);
        border-radius: 50%;
        margin-bottom: 1rem;
      "
    >
      <svg style="width: 40px; height: 40px; fill: white" viewBox="0 0 24 24">
        <path
          d="M12,15C12.81,15 13.5,14.7 14.11,14.11C14.7,13.5 15,12.81 15,12C15,11.19 14.7,10.5 14.11,9.89C13.5,9.3 12.81,9 12,9C11.19,9 10.5,9.3 9.89,9.89C9.3,10.5 9,11.19 9,12C9,12.81 9.3,13.5 9.89,14.11C10.5,14.7 11.19,15 12,15M21,16V10.5L19.5,9.5C19.66,8.66 19.66,7.34 19.5,6.5L21,5.5V4H19.5L18.5,2.5C17.66,2.34 16.34,2.34 15.5,2.5L14.5,4H13V5.5L12,6.5C11.16,6.34 9.84,6.34 9,6.5L8,5.5V4H6.5L5.5,2.5C4.66,2.34 3.34,2.34 2.5,2.5L1.5,4H0V5.5L1.5,6.5C1.34,7.34 1.34,8.66 1.5,9.5L0,10.5V16H1.5L2.5,17.5C3.34,17.66 4.66,17.66 5.5,17.5L6.5,16H8V14.5L9,13.5C9.84,13.66 11.16,13.66 12,13.5L13,14.5V16H14.5L15.5,17.5C16.34,17.66 17.66,17.66 18.5,17.5L19.5,16H21Z"
        />
      </svg>
    </div>
    <h1
      style="
        color: var(--negro-texto);
        font-size: 1.75rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
      "
    >
      {{ welcomeMessage }}
    </h1>
    <p style="color: var(--gris-texto); font-size: 1rem">
      Panel de Administración - Produbanco
    </p>
  </div>

  <!-- Panel de estado: Acceso Administrativo Activo -->
  <div
    style="
      margin-top: 2rem;
      padding: 1.5rem;
      background: var(--azul-produbanco);
      color: var(--blanco);
      border-radius: 8px;
      text-align: center;
    "
  >
    <h4
      style="
        margin-bottom: 0.5rem;
        font-size: 1rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
      "
    >
      <svg
        style="width: 20px; height: 20px; fill: currentColor"
        viewBox="0 0 24 24"
      >
        <path
          d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,7C13.4,7 14.8,8.6 14.8,10V11.5C15.4,11.5 16,12.1 16,12.7V16.2C16,16.8 15.4,17.3 14.8,17.3H9.2C8.6,17.3 8,16.8 8,16.2V12.8C8,12.2 8.6,11.7 9.2,11.7V10C9.2,8.6 10.6,7 12,7M12,8.2C11.2,8.2 10.5,8.7 10.5,9.5V11.5H13.5V9.5C13.5,8.7 12.8,8.2 12,8.2Z"
        />
      </svg>
      Acceso Administrativo Activo
    </h4>
    <p style="margin: 0; opacity: 0.9; font-size: 0.875rem">
      Panel de administración de Produbanco - Usar con responsabilidad
    </p>
  </div>

  <!-- Información del administrador -->
  <div
    style="
      background: var(--gris-claro);
      border: 1px solid var(--gris-borde);
      border-radius: 8px;
      padding: 2rem;
      margin-bottom: 2rem;
    "
  >
    <h3
      style="
        color: var(--negro-texto);
        margin-bottom: 1.5rem;
        font-size: 1.125rem;
        font-weight: 600;
      "
    >
      Información de la Sesión
    </h3>
    <div *ngIf="userInfo">
      <div class="info-row">
        <span class="info-label">Usuario:</span>
        <span class="info-value">{{ userInfo.username }}</span>
      </div>
      <div class="info-row">
        <span class="info-label">Email:</span>
        <span class="info-value">{{ userInfo.email || "-" }}</span>
      </div>
      <div class="info-row">
        <span class="info-label">Rol:</span>
        <span class="info-value">Administrador</span>
      </div>
      <div class="info-row">
        <span class="info-label">Estado:</span>
        <span
          style="
            color: var(--verde-produbanco);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
          "
        >
          <span
            style="
              width: 8px;
              height: 8px;
              background: var(--verde-produbanco);
              border-radius: 50%;
              display: inline-block;
            "
          ></span>
          Activo
        </span>
      </div>
      <div class="info-row">
        <span class="info-label">Permisos:</span>
        <span
          style="
            color: var(--azul-produbanco);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
          "
        >
          <span
            style="
              width: 8px;
              height: 8px;
              background: var(--azul-produbanco);
              border-radius: 50%;
              display: inline-block;
            "
          ></span>
          Administrador Completo
        </span>
      </div>
    </div>
  </div>

  <!-- Estado del Backend -->
  <div
    style="
      margin-bottom: 2rem;
      padding: 1.5rem;
      background: var(--azul-claro);
      border: 1px solid var(--azul-produbanco);
      border-radius: 8px;
    "
  >
    <h4
      style="
        color: var(--azul-produbanco);
        margin-bottom: 1rem;
        font-size: 1rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      "
    >
      <svg
        style="width: 20px; height: 20px; fill: currentColor"
        viewBox="0 0 24 24"
      >
        <path
          d="M4,6H20V16H4M20,18A2,2 0 0,0 22,16V6C22,4.89 21.1,4 20,4H4C2.89,4 2,4.89 2,6V16A2,2 0 0,0 4,18H0V20H24V18H20Z"
        />
      </svg>
      Estado del Servidor
    </h4>
    <p style="margin: 0; color: var(--gris-texto); font-size: 0.875rem">
      <strong>Conectividad:</strong>
      <span style="color: var(--verde-produbanco); font-weight: 600">{{
        healthStatus || "Verificando..."
      }}</span>
    </p>
  </div>

  <!-- Herramientas de Administración -->
  <div style="margin-bottom: 2rem">
    <h3
      style="
        color: var(--negro-texto);
        margin-bottom: 1.5rem;
        font-size: 1.125rem;
        font-weight: 600;
      "
    >
      Herramientas de Administración
    </h3>
    <div
      style="
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 1rem;
      "
    >
      <div
        style="
          background: var(--blanco);
          border: 1px solid var(--gris-borde);
          border-radius: 8px;
          padding: 1.5rem;
          transition: all 0.2s ease;
          cursor: pointer;
        "
      >
        <div
          style="
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
            background: #e3f2fd;
            border-radius: 8px;
            margin-bottom: 1rem;
          "
        >
          <svg
            style="width: 24px; height: 24px; fill: var(--azul-produbanco)"
            viewBox="0 0 24 24"
          >
            <path
              d="M12,4A4,4 0 0,1 16,8C16,10.11 14.11,12 12,12C9.89,12 8,10.11 8,8C8,5.89 9.89,4 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"
            />
          </svg>
        </div>
        <h4
          style="
            color: var(--negro-texto);
            font-weight: 600;
            margin-bottom: 0.75rem;
            font-size: 0.875rem;
          "
        >
          Gestión de Usuarios
        </h4>
        <ul
          style="
            margin: 0;
            padding-left: 1rem;
            color: var(--gris-texto);
            font-size: 0.75rem;
            line-height: 1.4;
          "
        >
          <li>Crear nuevos usuarios</li>
          <li>Editar perfiles existentes</li>
          <li>Gestionar roles y permisos</li>
        </ul>
      </div>
      <div
        style="
          background: var(--blanco);
          border: 1px solid var(--gris-borde);
          border-radius: 8px;
          padding: 1.5rem;
          transition: all 0.2s ease;
          cursor: pointer;
        "
      >
        <div
          style="
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
            background: #e3f2fd;
            border-radius: 8px;
            margin-bottom: 1rem;
          "
        >
          <svg
            style="width: 24px; height: 24px; fill: var(--azul-produbanco)"
            viewBox="0 0 24 24"
          >
            <path
              d="M4,6H20V16H4M20,18A2,2 0 0,0 22,16V6C22,4.89 21.1,4 20,4H4C2.89,4 2,4.89 2,6V16A2,2 0 0,0 4,18H0V20H24V18H20Z"
            />
          </svg>
        </div>
        <h4
          style="
            color: var(--negro-texto);
            font-weight: 600;
            margin-bottom: 0.75rem;
            font-size: 0.875rem;
          "
        >
          Configuración del Sistema
        </h4>
        <ul
          style="
            margin: 0;
            padding-left: 1rem;
            color: var(--gris-texto);
            font-size: 0.75rem;
            line-height: 1.4;
          "
        >
          <li>Configuración global</li>
          <li>Logs del sistema</li>
          <li>Respaldos y restauración</li>
        </ul>
      </div>
      <div
        style="
          background: var(--blanco);
          border: 1px solid var(--gris-borde);
          border-radius: 8px;
          padding: 1.5rem;
          transition: all 0.2s ease;
          cursor: pointer;
        "
      >
        <div
          style="
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
            background: #e3f2fd;
            border-radius: 8px;
            margin-bottom: 1rem;
          "
        >
          <svg
            style="width: 24px; height: 24px; fill: var(--azul-produbanco)"
            viewBox="0 0 24 24"
          >
            <path
              d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"
            />
          </svg>
        </div>
        <h4
          style="
            color: var(--negro-texto);
            font-weight: 600;
            margin-bottom: 0.75rem;
            font-size: 0.875rem;
          "
        >
          Herramientas de Diagnóstico
        </h4>
        <ul
          style="
            margin: 0;
            padding-left: 1rem;
            color: var(--gris-texto);
            font-size: 0.75rem;
            line-height: 1.4;
          "
        >
          <li>Mantenimiento del sistema</li>
          <li>Diagnósticos técnicos</li>
          <li>Utilidades avanzadas</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Acciones administrativas -->
  <div
    style="
      margin-top: 2rem;
      padding: 1.5rem;
      background: var(--gris-claro);
      border: 1px solid var(--gris-borde);
      border-radius: 8px;
    "
  >
    <h4
      style="
        color: var(--azul-produbanco);
        font-weight: 600;
        margin-bottom: 1rem;
        font-size: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      "
    >
      <svg
        style="width: 20px; height: 20px; fill: currentColor"
        viewBox="0 0 24 24"
      >
        <path d="M12,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z" />
      </svg>
      Diagnóstico del Sistema
    </h4>
    <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1rem">
      <button
        class="btn btn-primary"
        (click)="testAdminAccess()"
        [disabled]="isTestingAccess"
        style="width: auto"
      >
        <span *ngIf="!isTestingAccess">Probar acceso administrativo</span>
        <span *ngIf="isTestingAccess">
          <span class="spinner"></span>
          Probando...
        </span>
      </button>
      <button
        class="btn btn-secondary"
        (click)="checkBackendHealth()"
        style="width: auto"
      >
        Verificar estado del servidor
      </button>
    </div>
    <div
      *ngIf="testMessage"
      style="margin-top: 1rem; color: var(--azul-produbanco); font-weight: 600"
    >
      {{ testMessage }}
    </div>
  </div>
</div>
